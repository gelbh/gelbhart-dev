<% 
  style = local_assigns.fetch(:style, 'badge')
  size = local_assigns.fetch(:size, 'md')
  icon = local_assigns[:icon]
  url = local_assigns[:url]
  badge_class = local_assigns.fetch(:badge_class, 'project-badge')
  extra_classes = local_assigns[:extra_classes] || ''
  description = local_assigns[:tooltip] || local_assigns[:description]
  color = local_assigns[:color]
  text = local_assigns[:text]
%>

<% if style == 'list' %>
  <li class="tech-item tech-item-wrapper">
    <% if icon.present? %>
      <i class="bx <%= icon %> text-<%= color %> me-2"></i>
    <% end %>
    <div class="d-inline-flex align-items-center">
      <% if url.present? %>
        <%= link_to text, url, target: '_blank', rel: 'noopener noreferrer', class: 'text-decoration-none text-body' %>
      <% else %>
        <span class="text-body"><%= text %></span>
      <% end %>
      <% if description.present? %>
        <button type="button" 
                class="tech-info-btn btn btn-link p-0 border-0 text-<%= color %>" 
                data-bs-toggle="popover" 
                data-bs-trigger="click"
                data-bs-placement="top"
                data-bs-content="<%= description %>"
                data-bs-html="false"
                aria-label="Learn more about <%= text %>">
          <i class="bx bx-info-circle"></i>
        </button>
      <% end %>
    </div>
  </li>
<% else %>
  <% 
    size_classes = { 'sm' => 'fs-xs', 'md' => '', 'lg' => 'fs-6' }
    size_class = size_classes[size] || ''
    all_classes = "badge #{badge_class} bg-#{color} bg-opacity-10 text-#{color} #{size_class} #{extra_classes}".strip
  %>
  <div class="tech-badge-wrapper d-inline-flex align-items-center">
    <% if url.present? %>
      <%= link_to url, target: '_blank', rel: 'noopener noreferrer', class: "#{all_classes} text-decoration-none" do %>
        <% if icon.present? %>
          <i class="bx <%= icon %> me-1"></i>
        <% end %>
        <%= text %>
      <% end %>
    <% else %>
      <span class="<%= all_classes %>">
        <% if icon.present? %>
          <i class="bx <%= icon %> me-1"></i>
        <% end %>
        <%= text %>
      </span>
    <% end %>
    <% if description.present? %>
      <button type="button" 
              class="tech-info-btn btn btn-link p-0 border-0 text-<%= color %>" 
              data-bs-toggle="popover" 
              data-bs-trigger="click"
              data-bs-placement="top"
              data-bs-content="<%= description %>"
              data-bs-html="false"
              aria-label="Learn more about <%= text %>">
        <i class="bx bx-info-circle"></i>
      </button>
    <% end %>
  </div>
<% end %>