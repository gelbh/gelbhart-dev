<% link_icon = local_assigns.fetch(:link_icon, 'bx-right-arrow-alt') %>
<% animation_delay = local_assigns.fetch(:animation_delay, '') %>
<% link_target = local_assigns[:link_target] %>
<% link_rel = local_assigns[:link_rel] %>
<% github_url = local_assigns[:github_url] %>
<article class="card project-card border-0 shadow-sm h-100 <%= animation_delay %>">
  <div class="card-body p-4">
    <div class="d-flex align-items-center mb-3">
      <div class="flex-shrink-0">
        <div class="project-icon bg-<%= color %> bg-opacity-10 rounded-3 p-3">
          <i class="bx <%= icon %> fs-1 text-<%= color %>"></i>
        </div>
      </div>
      <div class="flex-grow-1 ms-3">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <h3 class="h5 mb-0"><%= title %></h3>
            <span class="fs-sm text-muted"><%= subtitle %></span>
          </div>
          <% if github_url.present? %>
            <a href="<%= github_url %>" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-link text-muted p-1 ms-2" title="View on GitHub" onclick="event.stopPropagation();">
              <i class="bx bxl-github fs-5"></i>
            </a>
          <% end %>
        </div>
      </div>
    </div>
    <p class="card-text mb-4"><%= description %></p>
    <div class="d-flex gap-2 mb-3 flex-wrap">
      <% badges.each do |badge| %>
        <%= render 'shared/tech_badge', text: badge[:text], color: badge[:color], url: badge[:url] %>
      <% end %>
    </div>
    <% if link_target.present? %>
      <a href="<%= link_url %>" target="<%= link_target %>" rel="<%= link_rel %>" class="btn btn-outline-primary stretched-link project-btn">
        <%= link_text %> <i class="bx <%= link_icon %> fs-5 ms-2 arrow-icon"></i>
      </a>
    <% else %>
      <%= link_to link_url, class: "btn btn-outline-primary stretched-link project-btn" do %>
        <%= link_text %> <i class="bx <%= link_icon %> fs-5 ms-2 arrow-icon"></i>
      <% end %>
    <% end %>
  </div>
</article>