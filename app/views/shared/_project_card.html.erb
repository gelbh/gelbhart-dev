<%
# Reusable project card component
# Usage: <%= render 'shared/project_card',
#           icon: 'bx-dumbbell',
#           color: 'primary',
#           title: 'Hevy Tracker',
#           subtitle: 'Google Apps Script',
#           description: 'Connect your Hevy workout data...',
#           badges: [{text: 'OAuth 2.0', color: 'success'}, {text: 'Google Apps', color: 'info'}],
#           link_text: 'Learn More',
#           link_url: hevy_tracker_path,
#           link_icon: 'bx-right-arrow-alt' %>
#
# Parameters:
# - icon: boxicons class (required)
# - color: Bootstrap color (required)
# - title: Project title (required)
# - subtitle: Project subtitle (required)
# - description: Project description (required)
# - badges: Array of badge hashes with 'text' and 'color' keys (required)
# - link_text: Link button text (required)
# - link_url: Link URL (required)
# - link_icon: Icon for link (optional, default: 'bx-right-arrow-alt')
# - link_target: Link target attribute (optional, e.g., '_blank')
# - link_rel: Link rel attribute (optional, e.g., 'noopener')
# - animation_delay: fade-in animation delay class (optional, e.g., 'delay-1')

link_icon ||= 'bx-right-arrow-alt'
animation_delay ||= ''
%>

<article class="card project-card border-0 shadow-sm h-100 <%= animation_delay %>">
  <div class="card-body p-4">
    <div class="d-flex align-items-center mb-3">
      <div class="flex-shrink-0">
        <div class="project-icon bg-<%= color %> bg-opacity-10 rounded-3 p-3">
          <i class="bx <%= icon %> fs-1 text-<%= color %>"></i>
        </div>
      </div>
      <div class="flex-grow-1 ms-3">
        <h3 class="h5 mb-0"><%= title %></h3>
        <span class="fs-sm text-muted"><%= subtitle %></span>
      </div>
    </div>
    <p class="card-text mb-4"><%= description %></p>
    <div class="d-flex gap-2 mb-3 flex-wrap">
      <% badges.each do |badge| %>
        <%= render 'shared/tech_badge', text: badge[:text], color: badge[:color] %>
      <% end %>
    </div>
    <% if defined?(link_target) && link_target %>
      <a href="<%= link_url %>" target="<%= link_target %>" rel="<%= link_rel %>" class="btn btn-outline-primary stretched-link project-btn">
        <%= link_text %> <i class="bx <%= link_icon %> fs-5 ms-2 arrow-icon"></i>
      </a>
    <% else %>
      <%= link_to link_url, class: "btn btn-outline-primary stretched-link project-btn" do %>
        <%= link_text %> <i class="bx <%= link_icon %> fs-5 ms-2 arrow-icon"></i>
      <% end %>
    <% end %>
  </div>
</article>
