// ============================================
// PAC-MAN INTERACTIONS
// ============================================
// Touch controls (joystick) and interaction components

.pacman-joystick {
  position: fixed;
  z-index: calc(var(--z-game) + 1);
  display: none; // Hidden by default, shown when user touches
  touch-action: none;
  pointer-events: none; // Allow touches to pass through to game container
  transform: translate(-50%, -50%); // Center on touch point

  .joystick-base {
    width: 180px;
    height: 180px;
    border-radius: 50%;
    background: rgba(11, 15, 25, 0.85);
    backdrop-filter: blur(10px);
    border: 3px solid rgba(99, 102, 241, 0.4);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
      inset 0 0 30px rgba(99, 102, 241, 0.1);
    position: relative;
    cursor: pointer;
    user-select: none;

    // Inner circle for visual depth
    &::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60%;
      height: 60%;
      border-radius: 50%;
      border: 2px solid rgba(99, 102, 241, 0.2);
      pointer-events: none;
    }
  }

  .joystick-stick {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 70px;
    height: 70px;
    min-width: 48px;
    min-height: 48px;
    border-radius: 50%;
    background: linear-gradient(
      135deg,
      rgba(99, 102, 241, 0.9) 0%,
      rgba(124, 58, 237, 0.9) 100%
    );
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.5),
      inset 0 2px 10px rgba(255, 255, 255, 0.2);
    transform: translate(-50%, -50%);
    transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
    pointer-events: none;
    z-index: 1;

    // Center dot
    &::after {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 30%;
      height: 30%;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    &.active {
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.7),
        inset 0 2px 10px rgba(255, 255, 255, 0.3);
    }
  }

  // Responsive adjustments
  @media (max-width: 576px) {
    .joystick-base {
      width: 150px;
      height: 150px;
    }

    .joystick-stick {
      width: 60px;
      height: 60px;
    }
  }

  // Show joystick when active
  &.active {
    display: block;
  }
}
