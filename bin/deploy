#!/bin/bash
set -e

echo "ğŸš€ Starting deployment process..."

# Clean old assets
echo "ğŸ§¹ Cleaning old assets..."
bin/rails assets:clobber

# Compile assets
echo "ğŸ”¨ Compiling assets..."
RAILS_ENV=production bin/rails assets:precompile

# Clear tmp cache
echo "ğŸ—‘ï¸  Clearing cache..."
bin/rails tmp:cache:clear

# Deploy to fly.io
echo "ğŸš€ Deploying to fly.io..."
fly deploy

echo "âœ… Deployment complete!"