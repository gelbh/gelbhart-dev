#!/bin/bash
set -e

echo "🚀 Starting deployment process..."

# Clean old assets
echo "🧹 Cleaning old assets..."
bin/rails assets:clobber

# Compile assets
echo "🔨 Compiling assets..."
RAILS_ENV=production bin/rails assets:precompile

# Clear tmp cache
echo "🗑️  Clearing cache..."
bin/rails tmp:cache:clear

# Deploy to fly.io
echo "🚀 Deploying to fly.io..."
fly deploy

echo "✅ Deployment complete!"